<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>8&nbsp; Fairness in Mechanism Design – ADLLM</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part03/computational-aspects-md.html" rel="next">
<link href="../part02/multi-objective-md.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark-4379b0ccadffce622b03caf4c46266b3.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-bdec3157979715d7154bb60f5aa24e58.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark-4104e206323135730aa08c3113d84ebc.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>

  <script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css">

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part02/efficiency.html">Multi-objective Opti</a></li><li class="breadcrumb-item"><a href="../part02/fairness.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Fairness in Mechanism Design</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">ADLLM</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../outline.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Outline</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Classical MD</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part01/intro-md.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction to Mechanism Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part01/auction-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Auction Theory Fundamentals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part01/ic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Incentive Compatibility and Truthfulness</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part01/revenue-opti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Revenue Optimization and Optimal Auctions</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Multi-objective Opti</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part02/efficiency.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Efficiency and Welfare Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part02/multi-objective-opti.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Multi-Objective Optimization Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part02/multi-objective-md.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Multi-Objective Mechanism Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part02/fairness.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Fairness in Mechanism Design</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Computational MD</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part03/computational-aspects-md.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Computational Aspects of Mechanism Design</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part03/learn-adapt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Learning and Adaptation in Mechanisms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part03/platform-econ.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Platform Economics and Two-Sided Markets</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">LLM Ads</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part04/llm-ads.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Introduction to LLM Advertising Markets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part04/llm-ads-moop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Multi-Objective LLM Advertising Mechanisms</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part04/llm-ads-experiments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Experimental Design and Empirical Methods</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part04/future.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Implementation and Future Directions</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chapter-introduction" id="toc-chapter-introduction" class="nav-link active" data-scroll-target="#chapter-introduction"><span class="header-section-number">8.1</span> Chapter Introduction</a></li>
  <li><a href="#intuitive-development-understanding-fairness-through-examples" id="toc-intuitive-development-understanding-fairness-through-examples" class="nav-link" data-scroll-target="#intuitive-development-understanding-fairness-through-examples"><span class="header-section-number">8.2</span> Intuitive Development: Understanding Fairness Through Examples</a>
  <ul class="collapse">
  <li><a href="#the-school-assignment-problem" id="toc-the-school-assignment-problem" class="nav-link" data-scroll-target="#the-school-assignment-problem"><span class="header-section-number">8.2.1</span> The School Assignment Problem</a></li>
  <li><a href="#llm-advertising-fairness-intuition" id="toc-llm-advertising-fairness-intuition" class="nav-link" data-scroll-target="#llm-advertising-fairness-intuition"><span class="header-section-number">8.2.2</span> LLM Advertising Fairness Intuition</a></li>
  <li><a href="#different-fairness-concepts-illustrated" id="toc-different-fairness-concepts-illustrated" class="nav-link" data-scroll-target="#different-fairness-concepts-illustrated"><span class="header-section-number">8.2.3</span> Different Fairness Concepts Illustrated</a></li>
  <li><a href="#building-toward-formal-analysis" id="toc-building-toward-formal-analysis" class="nav-link" data-scroll-target="#building-toward-formal-analysis"><span class="header-section-number">8.2.4</span> Building Toward Formal Analysis</a></li>
  </ul></li>
  <li><a href="#mathematical-foundations-formal-fairness-concepts" id="toc-mathematical-foundations-formal-fairness-concepts" class="nav-link" data-scroll-target="#mathematical-foundations-formal-fairness-concepts"><span class="header-section-number">8.3</span> Mathematical Foundations: Formal Fairness Concepts</a>
  <ul class="collapse">
  <li><a href="#individual-fairness-in-mechanism-design" id="toc-individual-fairness-in-mechanism-design" class="nav-link" data-scroll-target="#individual-fairness-in-mechanism-design"><span class="header-section-number">8.3.1</span> Individual Fairness in Mechanism Design</a></li>
  <li><a href="#group-fairness-concepts" id="toc-group-fairness-concepts" class="nav-link" data-scroll-target="#group-fairness-concepts"><span class="header-section-number">8.3.2</span> Group Fairness Concepts</a></li>
  <li><a href="#egalitarian-and-maximin-fairness" id="toc-egalitarian-and-maximin-fairness" class="nav-link" data-scroll-target="#egalitarian-and-maximin-fairness"><span class="header-section-number">8.3.3</span> Egalitarian and Maximin Fairness</a></li>
  <li><a href="#fair-division-and-cake-cutting-connections" id="toc-fair-division-and-cake-cutting-connections" class="nav-link" data-scroll-target="#fair-division-and-cake-cutting-connections"><span class="header-section-number">8.3.4</span> Fair Division and Cake Cutting Connections</a></li>
  <li><a href="#fairness-efficiency-trade-offs" id="toc-fairness-efficiency-trade-offs" class="nav-link" data-scroll-target="#fairness-efficiency-trade-offs"><span class="header-section-number">8.3.5</span> Fairness-Efficiency Trade-offs</a></li>
  <li><a href="#fairness-under-uncertainty" id="toc-fairness-under-uncertainty" class="nav-link" data-scroll-target="#fairness-under-uncertainty"><span class="header-section-number">8.3.6</span> Fairness Under Uncertainty</a></li>
  </ul></li>
  <li><a href="#advanced-results-computational-fair-mechanism-design" id="toc-advanced-results-computational-fair-mechanism-design" class="nav-link" data-scroll-target="#advanced-results-computational-fair-mechanism-design"><span class="header-section-number">8.4</span> Advanced Results: Computational Fair Mechanism Design</a>
  <ul class="collapse">
  <li><a href="#algorithmic-fairness-in-mechanism-design" id="toc-algorithmic-fairness-in-mechanism-design" class="nav-link" data-scroll-target="#algorithmic-fairness-in-mechanism-design"><span class="header-section-number">8.4.1</span> Algorithmic Fairness in Mechanism Design</a></li>
  <li><a href="#approximation-algorithms-for-fair-allocation" id="toc-approximation-algorithms-for-fair-allocation" class="nav-link" data-scroll-target="#approximation-algorithms-for-fair-allocation"><span class="header-section-number">8.4.2</span> Approximation Algorithms for Fair Allocation</a></li>
  <li><a href="#machine-learning-approaches-to-fair-mechanism-design" id="toc-machine-learning-approaches-to-fair-mechanism-design" class="nav-link" data-scroll-target="#machine-learning-approaches-to-fair-mechanism-design"><span class="header-section-number">8.4.3</span> Machine Learning Approaches to Fair Mechanism Design</a></li>
  <li><a href="#multi-objective-fair-mechanism-design" id="toc-multi-objective-fair-mechanism-design" class="nav-link" data-scroll-target="#multi-objective-fair-mechanism-design"><span class="header-section-number">8.4.4</span> Multi-Objective Fair Mechanism Design</a></li>
  <li><a href="#dynamic-fairness-considerations" id="toc-dynamic-fairness-considerations" class="nav-link" data-scroll-target="#dynamic-fairness-considerations"><span class="header-section-number">8.4.5</span> Dynamic Fairness Considerations</a></li>
  <li><a href="#robust-fair-mechanisms" id="toc-robust-fair-mechanisms" class="nav-link" data-scroll-target="#robust-fair-mechanisms"><span class="header-section-number">8.4.6</span> Robust Fair Mechanisms</a></li>
  </ul></li>
  <li><a href="#applications-and-implementation-fairness-in-llm-advertising" id="toc-applications-and-implementation-fairness-in-llm-advertising" class="nav-link" data-scroll-target="#applications-and-implementation-fairness-in-llm-advertising"><span class="header-section-number">8.5</span> Applications and Implementation: Fairness in LLM Advertising</a>
  <ul class="collapse">
  <li><a href="#problem-formulation-three-dimensional-fairness" id="toc-problem-formulation-three-dimensional-fairness" class="nav-link" data-scroll-target="#problem-formulation-three-dimensional-fairness"><span class="header-section-number">8.5.1</span> Problem Formulation: Three-Dimensional Fairness</a></li>
  <li><a href="#mathematical-model-for-llm-advertising-fairness" id="toc-mathematical-model-for-llm-advertising-fairness" class="nav-link" data-scroll-target="#mathematical-model-for-llm-advertising-fairness"><span class="header-section-number">8.5.2</span> Mathematical Model for LLM Advertising Fairness</a></li>
  <li><a href="#fair-mechanism-design-for-llm-advertising" id="toc-fair-mechanism-design-for-llm-advertising" class="nav-link" data-scroll-target="#fair-mechanism-design-for-llm-advertising"><span class="header-section-number">8.5.3</span> Fair Mechanism Design for LLM Advertising</a></li>
  <li><a href="#case-study-fair-book-recommendation-system" id="toc-case-study-fair-book-recommendation-system" class="nav-link" data-scroll-target="#case-study-fair-book-recommendation-system"><span class="header-section-number">8.5.4</span> Case Study: Fair Book Recommendation System</a></li>
  <li><a href="#quality-fairness-integration" id="toc-quality-fairness-integration" class="nav-link" data-scroll-target="#quality-fairness-integration"><span class="header-section-number">8.5.5</span> Quality-Fairness Integration</a></li>
  <li><a href="#empirical-fairness-evaluation-framework" id="toc-empirical-fairness-evaluation-framework" class="nav-link" data-scroll-target="#empirical-fairness-evaluation-framework"><span class="header-section-number">8.5.6</span> Empirical Fairness Evaluation Framework</a></li>
  <li><a href="#regulatory-and-policy-implications" id="toc-regulatory-and-policy-implications" class="nav-link" data-scroll-target="#regulatory-and-policy-implications"><span class="header-section-number">8.5.7</span> Regulatory and Policy Implications</a></li>
  </ul></li>
  <li><a href="#chapter-synthesis" id="toc-chapter-synthesis" class="nav-link" data-scroll-target="#chapter-synthesis"><span class="header-section-number">8.6</span> Chapter Synthesis</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises"><span class="header-section-number">8.7</span> Exercises</a></li>
  <li><a href="#further-reading" id="toc-further-reading" class="nav-link" data-scroll-target="#further-reading"><span class="header-section-number">8.8</span> Further Reading</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part02/efficiency.html">Multi-objective Opti</a></li><li class="breadcrumb-item"><a href="../part02/fairness.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Fairness in Mechanism Design</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Fairness in Mechanism Design</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="chapter-introduction" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="chapter-introduction"><span class="header-section-number">8.1</span> Chapter Introduction</h2>
<p>When ChatGPT responds to “What’s the best coffee shop near me?” should it favor the highest bidder, the most relevant establishment, or ensure all local coffee shops receive equal consideration? This question strikes at the heart of fairness in AI-powered advertising systems. As these platforms increasingly mediate access to information and economic opportunities, concerns about equitable treatment have moved from philosophical considerations to practical policy requirements.</p>
<p>Consider three coffee shops competing for inclusion in LLM responses: Premium Roasters (established chain with large advertising budget), Local Grind (small neighborhood shop with limited funds), and Student Café (budget-friendly option near campus). A purely revenue-maximizing mechanism consistently features Premium Roasters, potentially undermining local businesses and limiting user choice. Conversely, a rotation system ensuring equal exposure might recommend irrelevant options, reducing user satisfaction.</p>
<p>This scenario illustrates the fundamental tension between efficiency, revenue, and fairness in mechanism design. Unlike traditional economic settings where market forces theoretically ensure fair outcomes, LLM advertising platforms exercise significant control over information access, creating potential for unfair discrimination and market concentration.</p>
<p>Fairness in mechanism design encompasses multiple concepts: procedural fairness (equal treatment in the allocation process), outcome fairness (equitable distribution of benefits), and access fairness (ensuring participation opportunities regardless of economic resources). Each concept leads to different mechanism designs with distinct trade-offs against efficiency and revenue.</p>
<p><strong>Learning Objectives:</strong> By the end of this chapter, you should be able to:</p>
<ul>
<li>Distinguish between different fairness concepts (envy-freeness, proportionality, egalitarian, group fairness) and their application to mechanism design</li>
<li>Understand the mathematical formalization of fairness constraints and their integration with incentive compatibility requirements</li>
<li>Analyze fairness-efficiency trade-offs and identify conditions where they conflict or align</li>
<li>Design mechanisms that incorporate fairness considerations while maintaining truthfulness and participation incentives</li>
<li>Apply fairness analysis to LLM advertising contexts, considering both advertiser equity and user welfare implications</li>
</ul>
<p><strong>Chapter Roadmap:</strong> We begin with intuitive examples illustrating different fairness concepts and their potential conflicts with efficiency. The chapter then develops formal mathematical frameworks for fairness in mechanism design, examining both individual and group fairness concepts. We analyze fundamental trade-offs between fairness and other objectives, explore computational approaches for fair mechanism design, and conclude with detailed applications to LLM advertising platforms.</p>
<p><strong>Connection to Your Thesis Research:</strong> This chapter provides essential foundation for analyzing the fairness dimension of your three-objective (revenue-quality-fairness) framework. The concepts developed here enable you to formally define fairness measures for LLM advertising, design mechanisms that balance fairness against revenue and quality considerations, and analyze the welfare implications of different fairness-efficiency trade-offs.</p>
</section>
<section id="intuitive-development-understanding-fairness-through-examples" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="intuitive-development-understanding-fairness-through-examples"><span class="header-section-number">8.2</span> Intuitive Development: Understanding Fairness Through Examples</h2>
<section id="the-school-assignment-problem" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="the-school-assignment-problem"><span class="header-section-number">8.2.1</span> The School Assignment Problem</h3>
<p>To build intuition about fairness concepts, consider assigning students to schools based on preferences and priorities. This classic mechanism design problem illustrates key fairness principles that extend to LLM advertising.</p>
<p><strong>Students:</strong> Alice (high test scores), Bob (average scores), Carol (low scores, lives near School 1) <strong>Schools:</strong> School 1 (prestigious, limited capacity), School 2 (good quality, moderate capacity), School 3 (basic option, high capacity)</p>
<p><strong>Mechanism A: Pure Merit-Based</strong> Assign students to their highest-preference school based on test scores.</p>
<ul>
<li>Alice → School 1 (high scores, gets first choice)</li>
<li>Bob → School 2 (moderate scores, gets second choice)</li>
<li>Carol → School 3 (low scores, gets remaining option)</li>
</ul>
<p><strong>Fairness Analysis:</strong></p>
<ul>
<li><strong>Efficient</strong>: Matches highest achievers with best schools</li>
<li><strong>Potentially Unfair</strong>: Systematically disadvantages students with lower test scores, possibly reflecting socioeconomic inequalities rather than merit</li>
</ul>
<p><strong>Mechanism B: Lottery System</strong> Random assignment ignoring scores and preferences.</p>
<ul>
<li>Equal probability for each student at each school</li>
</ul>
<p><strong>Fairness Analysis:</strong></p>
<ul>
<li><strong>Equal Treatment</strong>: All students have identical chances</li>
<li><strong>Inefficient</strong>: Ignores both merit and preferences</li>
<li><strong>Process Fair but Outcome Problematic</strong>: May assign unmotivated students to prestigious schools</li>
</ul>
<p><strong>Mechanism C: Boston Mechanism</strong> Students rank schools, schools rank students, then stable matching.</p>
<ul>
<li>Considers both student preferences and school priorities</li>
<li>May incentivize strategic reporting (not truthful)</li>
</ul>
<p><strong>Mechanism D: Deferred Acceptance</strong> Truthful mechanism respecting both student preferences and school priorities.</p>
<ul>
<li><strong>Strategy-proof</strong>: Truth-telling is optimal</li>
<li><strong>Respects Priorities</strong>: Schools’ ranking criteria are honored</li>
<li><strong>Student-Optimal</strong>: Among stable matchings, favors students</li>
</ul>
</section>
<section id="llm-advertising-fairness-intuition" class="level3" data-number="8.2.2">
<h3 data-number="8.2.2" class="anchored" data-anchor-id="llm-advertising-fairness-intuition"><span class="header-section-number">8.2.2</span> LLM Advertising Fairness Intuition</h3>
<p><strong>Scenario:</strong> “Recommend a restaurant for dinner tonight” <strong>Advertisers:</strong> Chain Restaurant (high budget), Local Bistro (medium budget), Family Diner (low budget)</p>
<p><strong>Fairness Concern 1: Economic Discrimination</strong> Should mechanisms favor advertisers based solely on their ability to pay? This could systematically exclude small businesses, reducing diversity and potentially harming users who prefer local options.</p>
<p><strong>Fairness Concern 2: Relevance vs.&nbsp;Equality</strong> The Chain Restaurant might be less relevant for users seeking unique experiences, but the mechanism could still favor it due to higher bids. This creates a trade-off between user welfare and advertiser equity.</p>
<p><strong>Fairness Concern 3: Long-term Market Effects</strong> Consistently favoring high-bidding advertisers could lead to market concentration, reducing competition and innovation. Fair mechanisms might consider these dynamic effects.</p>
</section>
<section id="different-fairness-concepts-illustrated" class="level3" data-number="8.2.3">
<h3 data-number="8.2.3" class="anchored" data-anchor-id="different-fairness-concepts-illustrated"><span class="header-section-number">8.2.3</span> Different Fairness Concepts Illustrated</h3>
<p><strong>Individual Fairness: “Similar individuals should be treated similarly”</strong></p>
<ul>
<li>In school assignment: Students with similar test scores should have similar school assignment probabilities</li>
<li>In LLM advertising: Advertisers with similar relevance scores should have similar selection probabilities, regardless of budget differences</li>
</ul>
<p><strong>Group Fairness: “Different groups should receive equitable treatment”</strong></p>
<ul>
<li>In school assignment: Each demographic group should be represented proportionally in prestigious schools</li>
<li>In LLM advertising: Small businesses should receive adequate representation relative to large corporations</li>
</ul>
<p><strong>Procedural Fairness: “The process itself should be fair”</strong></p>
<ul>
<li>In school assignment: All students should be able to participate and have their preferences considered</li>
<li>In LLM advertising: All advertisers should be able to bid and compete on equal terms</li>
</ul>
<p><strong>Outcome Fairness: “The results should be equitably distributed”</strong></p>
<ul>
<li>In school assignment: Educational opportunities should be distributed fairly across students</li>
<li>In LLM advertising: Advertising opportunities should be distributed fairly across advertisers</li>
</ul>
<p><strong>Envy-Freeness: “No agent should prefer another agent’s outcome”</strong></p>
<ul>
<li>In school assignment: No student should prefer another student’s school assignment given the other student’s characteristics</li>
<li>In LLM advertising: No advertiser should prefer another advertiser’s allocation given the other’s bid and relevance</li>
</ul>
</section>
<section id="building-toward-formal-analysis" class="level3" data-number="8.2.4">
<h3 data-number="8.2.4" class="anchored" data-anchor-id="building-toward-formal-analysis"><span class="header-section-number">8.2.4</span> Building Toward Formal Analysis</h3>
<p>These examples reveal several key insights:</p>
<ol type="1">
<li><strong>Multiple Valid Fairness Concepts</strong>: Different fairness notions can conflict with each other and with efficiency</li>
<li><strong>Context Dependence</strong>: Appropriate fairness concepts depend on the specific application and stakeholder concerns</li>
<li><strong>Trade-off Relationships</strong>: Fairness often conflicts with efficiency and revenue, but not always</li>
<li><strong>Strategic Considerations</strong>: Fair mechanisms must still incentivize truthful reporting</li>
<li><strong>Long-term vs.&nbsp;Short-term</strong>: Fair outcomes in individual instances may lead to unfair long-term dynamics</li>
</ol>
<p>The remainder of this chapter formalizes these concepts mathematically and develops tools for analyzing fairness-efficiency trade-offs in mechanism design.</p>
</section>
</section>
<section id="mathematical-foundations-formal-fairness-concepts" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="mathematical-foundations-formal-fairness-concepts"><span class="header-section-number">8.3</span> Mathematical Foundations: Formal Fairness Concepts</h2>
<section id="individual-fairness-in-mechanism-design" class="level3" data-number="8.3.1">
<h3 data-number="8.3.1" class="anchored" data-anchor-id="individual-fairness-in-mechanism-design"><span class="header-section-number">8.3.1</span> Individual Fairness in Mechanism Design</h3>
<p><strong>Definition 8.1 (Individual Fairness).</strong> A mechanism satisfies individual fairness if agents with similar characteristics receive similar treatment. Formally, for distance metric <span class="math inline">d(\cdot, \cdot)</span> on agent types and outcome metric <span class="math inline">\rho(\cdot, \cdot)</span> on outcomes: <span class="math display">d(\theta_i, \theta_j) \leq \epsilon \implies \rho(x_i(\theta), x_j(\theta')) \leq L \cdot \epsilon</span> for some Lipschitz constant <span class="math inline">L &gt; 0</span>, where <span class="math inline">\theta' = (\theta_j, \theta_{-j})</span> and <span class="math inline">\theta = (\theta_i, \theta_{-i})</span> with <span class="math inline">\theta_{-i} = \theta_{-j}</span>.</p>
<p><strong>Key Challenge</strong>: Defining appropriate distance metrics for agent characteristics and outcome similarity measures.</p>
<p><strong>Example - LLM Advertising Individual Fairness:</strong> For advertisers with bids <span class="math inline">b_i, b_j</span> and relevance scores <span class="math inline">r_i, r_j</span>: <span class="math display">|(b_i, r_i) - (b_j, r_j)|_2 \leq \epsilon \implies |x_i - x_j| \leq L \cdot \epsilon</span> where <span class="math inline">x_i, x_j</span> are allocation probabilities.</p>
<p><strong>Definition 8.2 (Envy-Freeness).</strong> Agent <span class="math inline">i</span> does not envy agent <span class="math inline">j</span> if: <span class="math display">u_i(x_i(\theta), p_i(\theta), \theta_i) \geq u_i(x_j(\theta), p_j(\theta), \theta_i)</span></p>
<p>A mechanism is envy-free if no agent envies any other agent.</p>
<p><strong>Theorem 8.1 (Envy-Freeness and Efficiency).</strong> In quasilinear environments with private values, the VCG mechanism is envy-free among winning bidders but may not be envy-free overall.</p>
<p><em>Proof.</em> For winning bidders <span class="math inline">i, j</span> in VCG, payments equal externalities imposed on others. Since allocations are efficient, winner <span class="math inline">i</span> receives higher surplus than winner <span class="math inline">j</span> would from <span class="math inline">i</span>’s bundle, eliminating envy. However, losing bidders may envy winners who receive positive surplus. □</p>
</section>
<section id="group-fairness-concepts" class="level3" data-number="8.3.2">
<h3 data-number="8.3.2" class="anchored" data-anchor-id="group-fairness-concepts"><span class="header-section-number">8.3.2</span> Group Fairness Concepts</h3>
<p><strong>Definition 8.3 (Statistical Parity).</strong> For groups <span class="math inline">G_1, G_2 \subseteq N</span>, a mechanism satisfies statistical parity if: <span class="math display">\mathbb{E}[x_i \mid i \in G_1] = \mathbb{E}[x_j \mid j \in G_2]</span></p>
<p><strong>Definition 8.4 (Equalized Odds).</strong> A mechanism satisfies equalized odds across groups if, conditional on agent type <span class="math inline">\theta</span>: <span class="math display">\mathbb{P}[x_i = 1 \mid \theta_i = \theta, i \in G_1] = \mathbb{P}[x_j = 1 \mid \theta_j = \theta, j \in G_2]</span></p>
<p><strong>Definition 8.5 (Calibration).</strong> A mechanism is calibrated across groups if for all groups <span class="math inline">G</span> and allocation probabilities <span class="math inline">p</span>: <span class="math display">\mathbb{E}[\text{outcome} \mid x_i = p, i \in G] = p</span></p>
<p><strong>Example - LLM Advertising Group Fairness:</strong> Let <span class="math inline">G_1</span> = {small businesses}, <span class="math inline">G_2</span> = {large corporations}. Statistical parity requires: <span class="math display">\mathbb{E}[\text{ad selection probability} \mid \text{small business}] = \mathbb{E}[\text{ad selection probability} \mid \text{large corporation}]</span></p>
<p>This might conflict with efficiency if large corporations systematically have higher relevance or bid more aggressively.</p>
</section>
<section id="egalitarian-and-maximin-fairness" class="level3" data-number="8.3.3">
<h3 data-number="8.3.3" class="anchored" data-anchor-id="egalitarian-and-maximin-fairness"><span class="header-section-number">8.3.3</span> Egalitarian and Maximin Fairness</h3>
<p><strong>Definition 8.6 (Egalitarian Mechanism).</strong> A mechanism maximizes the minimum utility across all agents: <span class="math display">\max_{(x,p) \text{ IC, IR}} \min_{i \in N} \mathbb{E}[u_i(x(\theta), p_i(\theta), \theta_i)]</span></p>
<p><strong>Definition 8.7 (Proportional Fairness).</strong> An allocation <span class="math inline">x</span> satisfies proportional fairness if for any alternative allocation <span class="math inline">y</span>: <span class="math display">\sum_{i \in N} \frac{y_i - x_i}{x_i} \leq 0</span></p>
<p><strong>Theorem 8.2 (Proportional Fairness Characterization).</strong> An allocation is proportionally fair if and only if it maximizes <span class="math inline">\sum_{i \in N} w_i \log x_i</span> for some weights <span class="math inline">w_i &gt; 0</span>.</p>
<p><em>Proof.</em> The first-order conditions for maximizing <span class="math inline">\sum_i w_i \log x_i</span> subject to feasibility constraints yield: <span class="math display">\frac{w_i}{x_i} = \lambda</span> for some Lagrange multiplier <span class="math inline">\lambda</span>. The proportional fairness condition follows from the envelope theorem applied to small perturbations around this optimum. □</p>
<p><strong>Connection to Nash Social Welfare:</strong> Proportional fairness with <span class="math inline">w_i = 1</span> corresponds to maximizing Nash social welfare <span class="math inline">\prod_i x_i</span>.</p>
</section>
<section id="fair-division-and-cake-cutting-connections" class="level3" data-number="8.3.4">
<h3 data-number="8.3.4" class="anchored" data-anchor-id="fair-division-and-cake-cutting-connections"><span class="header-section-number">8.3.4</span> Fair Division and Cake Cutting Connections</h3>
<p><strong>Definition 8.8 (Proportionality).</strong> In fair division, agent <span class="math inline">i</span> receives a proportional share if: <span class="math display">v_i(\text{bundle}_i) \geq \frac{1}{n} v_i(\text{entire resource})</span></p>
<p><strong>Definition 8.9 (Envy-Free Division).</strong> A division is envy-free if each agent weakly prefers their own bundle to any other agent’s bundle.</p>
<p><strong>Theorem 8.3 (Existence of Fair Divisions).</strong> For divisible resources with continuous preferences, there always exists an allocation that is both proportional and envy-free.</p>
<p><strong>Application to LLM Advertising:</strong> Think of “advertising opportunities” as a divisible resource to be allocated fairly among advertisers. Each advertiser should receive a share proportional to their contribution (bid, relevance) while ensuring no advertiser prefers another’s allocation.</p>
</section>
<section id="fairness-efficiency-trade-offs" class="level3" data-number="8.3.5">
<h3 data-number="8.3.5" class="anchored" data-anchor-id="fairness-efficiency-trade-offs"><span class="header-section-number">8.3.5</span> Fairness-Efficiency Trade-offs</h3>
<p><strong>Definition 8.10 (Price of Fairness).</strong> The price of fairness is the efficiency loss from imposing fairness constraints: <span class="math display">\text{PoF} = \frac{\text{Welfare}(\text{efficient allocation})}{\text{Welfare}(\text{fair allocation})}</span></p>
<p><strong>Theorem 8.4 (Fairness-Efficiency Trade-off).</strong> There exist environments where any envy-free mechanism achieves at most <span class="math inline">1/n</span> of the efficient welfare, where <span class="math inline">n</span> is the number of agents.</p>
<p><em>Proof Sketch.</em> Consider agents with values <span class="math inline">(n, 0, 0, \ldots, 0)</span> for a single item. The efficient allocation gives the item to agent 1. Any envy-free allocation must give each agent probability <span class="math inline">1/n</span> of receiving the item, achieving welfare <span class="math inline">1</span> versus efficient welfare <span class="math inline">n</span>. □</p>
<p><strong>Corollary 8.5 (Impossibility Result).</strong> No mechanism can simultaneously achieve:</p>
<ol type="1">
<li>Allocative efficiency</li>
<li>Envy-freeness</li>
<li>Individual rationality</li>
<li>Strategy-proofness in all environments with heterogeneous valuations.</li>
</ol>
</section>
<section id="fairness-under-uncertainty" class="level3" data-number="8.3.6">
<h3 data-number="8.3.6" class="anchored" data-anchor-id="fairness-under-uncertainty"><span class="header-section-number">8.3.6</span> Fairness Under Uncertainty</h3>
<p><strong>Definition 8.11 (Ex-Ante vs.&nbsp;Ex-Post Fairness).</strong></p>
<ul>
<li><strong>Ex-ante fairness</strong>: Fairness in expectation before uncertainty is resolved</li>
<li><strong>Ex-post fairness</strong>: Fairness in realized outcomes after uncertainty is resolved</li>
</ul>
<p><strong>Theorem 8.6 (Ex-Ante/Ex-Post Trade-off).</strong> Mechanisms that are ex-ante fair may violate ex-post fairness, and vice versa.</p>
<p><em>Example.</em> A lottery giving each agent probability <span class="math inline">1/n</span> of winning a prize is ex-ante fair but ex-post unfair (winner gets everything, others get nothing).</p>
<p><strong>Application to LLM Advertising:</strong> Should fairness be measured across all queries (ex-ante) or within each individual query response (ex-post)?</p>
</section>
</section>
<section id="advanced-results-computational-fair-mechanism-design" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="advanced-results-computational-fair-mechanism-design"><span class="header-section-number">8.4</span> Advanced Results: Computational Fair Mechanism Design</h2>
<section id="algorithmic-fairness-in-mechanism-design" class="level3" data-number="8.4.1">
<h3 data-number="8.4.1" class="anchored" data-anchor-id="algorithmic-fairness-in-mechanism-design"><span class="header-section-number">8.4.1</span> Algorithmic Fairness in Mechanism Design</h3>
<p><strong>Definition 8.12 (Computationally Fair Mechanism).</strong> A mechanism is computationally fair if:</p>
<ol type="1">
<li>It can be computed efficiently (polynomial time)</li>
<li>It satisfies specified fairness constraints</li>
<li>It maintains incentive compatibility and individual rationality</li>
</ol>
<p><strong>Theorem 8.7 (Computational Complexity of Fair Mechanisms).</strong> Finding optimal fair mechanisms is NP-hard in general, but polynomial-time approximation algorithms exist for specific fairness concepts.</p>
<p><em>Proof Outline.</em> The general problem reduces to multi-objective optimization with non-convex constraints (IC, IR, fairness). However, for specific fairness measures like proportional fairness, the problem becomes convex and tractable. □</p>
</section>
<section id="approximation-algorithms-for-fair-allocation" class="level3" data-number="8.4.2">
<h3 data-number="8.4.2" class="anchored" data-anchor-id="approximation-algorithms-for-fair-allocation"><span class="header-section-number">8.4.2</span> Approximation Algorithms for Fair Allocation</h3>
<p><strong>Algorithm: Proportionally Fair Allocation</strong></p>
<pre><code>Input: Agent valuations v, fairness weights w
Output: Proportionally fair allocation x

1. Initialize: x_i = 1/n for all i (equal allocation)
2. While not converged:
   3.   For each agent i:
   4.     Compute gradient: g_i = w_i / x_i
   5.     Update: x_i ← x_i + α × (g_i - average(g))
   6.   Project onto feasibility constraints
7. Return x</code></pre>
<p><strong>Theorem 8.8 (Convergence Guarantee).</strong> The proportional fairness algorithm converges to the optimal solution in <span class="math inline">O(1/\epsilon^2)</span> iterations.</p>
</section>
<section id="machine-learning-approaches-to-fair-mechanism-design" class="level3" data-number="8.4.3">
<h3 data-number="8.4.3" class="anchored" data-anchor-id="machine-learning-approaches-to-fair-mechanism-design"><span class="header-section-number">8.4.3</span> Machine Learning Approaches to Fair Mechanism Design</h3>
<p><strong>Fairness-Constrained Learning:</strong> <span class="math display">\min_{(x,p)} \mathbb{E}[\text{loss}(x(\theta), p(\theta), \theta)]</span> <span class="math display">\text{subject to: IC, IR, fairness constraints}</span></p>
<p><strong>Implementation via Lagrangian Relaxation:</strong></p>
<pre><code>Algorithm: Fair Mechanism Learning
Input: Training data D, fairness constraints F
Output: Fair mechanism parameters

1. Initialize mechanism parameters θ
2. For each epoch:
   3.   Compute mechanism outputs for batch
   4.   Calculate loss: L = efficiency_loss + λ×fairness_violation
   5.   Update parameters: θ ← θ - α∇L
   6.   Project onto IC/IR constraint set
7. Return final mechanism</code></pre>
</section>
<section id="multi-objective-fair-mechanism-design" class="level3" data-number="8.4.4">
<h3 data-number="8.4.4" class="anchored" data-anchor-id="multi-objective-fair-mechanism-design"><span class="header-section-number">8.4.4</span> Multi-Objective Fair Mechanism Design</h3>
<p><strong>Extended Problem Formulation:</strong> <span class="math display">\max_{(x,p)} (\text{Efficiency}, \text{Revenue}, \text{Fairness})</span> <span class="math display">\text{subject to: IC, IR constraints}</span></p>
<p><strong>Scalarization with Fairness:</strong> <span class="math display">W_{\lambda,\mu}(x,p) = \lambda_1 \text{Efficiency} + \lambda_2 \text{Revenue} + \mu \text{Fairness}</span></p>
<p><strong>Theorem 8.9 (Fair Pareto Frontier).</strong> The set of mechanisms that are Pareto efficient in (Efficiency, Revenue, Fairness) space forms a two-dimensional surface in three-dimensional objective space.</p>
</section>
<section id="dynamic-fairness-considerations" class="level3" data-number="8.4.5">
<h3 data-number="8.4.5" class="anchored" data-anchor-id="dynamic-fairness-considerations"><span class="header-section-number">8.4.5</span> Dynamic Fairness Considerations</h3>
<p><strong>Definition 8.13 (Long-term Fairness).</strong> A dynamic mechanism is long-term fair if fairness violations in individual periods are compensated over time: <span class="math display">\lim_{T \to \infty} \frac{1}{T} \sum_{t=1}^T \text{FairnessViolation}_t = 0</span></p>
<p><strong>Algorithm: Dynamic Fair Allocation</strong></p>
<pre><code>Input: Time horizon T, fairness target F
Output: Allocation sequence {x_t}

1. Initialize fairness debt: debt_i = 0 for all i
2. For each period t:
   3.   Observe agent types θ_t
   4.   Compute efficient allocation x*_t
   5.   Adjust for fairness: x_t = adjust(x*_t, debt)
   6.   Update fairness debt: debt_i += target_allocation_i - x_t,i
7. Return allocation sequence</code></pre>
</section>
<section id="robust-fair-mechanisms" class="level3" data-number="8.4.6">
<h3 data-number="8.4.6" class="anchored" data-anchor-id="robust-fair-mechanisms"><span class="header-section-number">8.4.6</span> Robust Fair Mechanisms</h3>
<p><strong>Definition 8.14 (Robust Fairness).</strong> A mechanism is robustly fair if it maintains fairness properties across all realizations in an uncertainty set <span class="math inline">\mathcal{U}</span>: <span class="math display">\min_{\xi \in \mathcal{U}} \text{Fairness}(x(\xi), p(\xi)) \geq \text{threshold}</span></p>
<p><strong>Application to LLM Advertising:</strong> Ensure fairness across different user query distributions and advertiser participation patterns.</p>
</section>
</section>
<section id="applications-and-implementation-fairness-in-llm-advertising" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="applications-and-implementation-fairness-in-llm-advertising"><span class="header-section-number">8.5</span> Applications and Implementation: Fairness in LLM Advertising</h2>
<section id="problem-formulation-three-dimensional-fairness" class="level3" data-number="8.5.1">
<h3 data-number="8.5.1" class="anchored" data-anchor-id="problem-formulation-three-dimensional-fairness"><span class="header-section-number">8.5.1</span> Problem Formulation: Three-Dimensional Fairness</h3>
<p><strong>Stakeholder-Specific Fairness Concepts:</strong></p>
<p><strong>1. Advertiser Fairness:</strong></p>
<ul>
<li><strong>Individual</strong>: Similar advertisers (bid, relevance) receive similar treatment</li>
<li><strong>Group</strong>: Small businesses vs.&nbsp;large corporations receive equitable opportunities</li>
<li><strong>Temporal</strong>: Fair distribution of opportunities over time</li>
</ul>
<p><strong>2. User Fairness:</strong></p>
<ul>
<li><strong>Quality Equity</strong>: All users receive high-quality, relevant recommendations</li>
<li><strong>Diversity</strong>: Users see diverse advertising content, not just from highest bidders</li>
<li><strong>Access</strong>: Equal access to information regardless of advertiser market power</li>
</ul>
<p><strong>3. Platform Fairness:</strong></p>
<ul>
<li><strong>Sustainability</strong>: Fair mechanisms support platform viability</li>
<li><strong>Neutrality</strong>: Platform doesn’t unfairly favor particular advertiser types</li>
</ul>
</section>
<section id="mathematical-model-for-llm-advertising-fairness" class="level3" data-number="8.5.2">
<h3 data-number="8.5.2" class="anchored" data-anchor-id="mathematical-model-for-llm-advertising-fairness"><span class="header-section-number">8.5.2</span> Mathematical Model for LLM Advertising Fairness</h3>
<p><strong>Setup:</strong></p>
<ul>
<li>Advertisers <span class="math inline">N = \{1, 2, \ldots, n\}</span> with types <span class="math inline">\theta_i = (v_i, r_i, g_i)</span>
<ul>
<li><span class="math inline">v_i</span>: private valuation (willingness to pay)</li>
<li><span class="math inline">r_i</span>: relevance score (known to platform)</li>
<li><span class="math inline">g_i</span>: group membership (small business, large corporation, etc.)</li>
</ul></li>
</ul>
<p><strong>Fairness Constraints:</strong></p>
<p><strong>Individual Fairness:</strong> <span class="math display">\|(v_i, r_i) - (v_j, r_j)\|_2 \leq \epsilon \implies |x_i - x_j| \leq L\epsilon</span></p>
<p><strong>Group Fairness (Statistical Parity):</strong> <span class="math display">\mathbb{E}[x_i \mid g_i = \text{small}] \geq \alpha \cdot \mathbb{E}[x_j \mid g_j = \text{large}]</span> for some fairness parameter <span class="math inline">\alpha \in (0, 1]</span>.</p>
<p><strong>Temporal Fairness:</strong> <span class="math display">\frac{1}{T} \sum_{t=1}^T x_{i,t} \geq \beta \cdot \frac{1}{T} \sum_{t=1}^T \frac{r_{i,t}}{\sum_j r_{j,t}}</span> ensuring long-term allocation proportional to relevance contributions.</p>
</section>
<section id="fair-mechanism-design-for-llm-advertising" class="level3" data-number="8.5.3">
<h3 data-number="8.5.3" class="anchored" data-anchor-id="fair-mechanism-design-for-llm-advertising"><span class="header-section-number">8.5.3</span> Fair Mechanism Design for LLM Advertising</h3>
<p><strong>Approach 1: Fairness-Adjusted Scoring</strong> <span class="math display">\text{Score}_i = \gamma v_i + (1-\gamma) r_i + \phi \cdot \text{FairnessBonus}_i</span></p>
<p>where <span class="math inline">\text{FairnessBonus}_i</span> depends on:</p>
<ul>
<li>Historical under-representation</li>
<li>Group membership</li>
<li>Individual fairness violations</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre><code>Algorithm: Fair LLM Advertising Mechanism
Input: Query q, Advertisers {(v_i, r_i, g_i)}, Fairness weights φ
Output: Selected advertiser and payment

1. Compute base scores: s_i = γv_i + (1-γ)r_i
2. Calculate fairness adjustments:
   3.   For each advertiser i:
   4.     historical_deficit_i = target_share_i - actual_share_i
   5.     group_adjustment_i = group_fairness_bonus(g_i)
   6.     fairness_bonus_i = φ × (historical_deficit_i + group_adjustment_i)
7. Final scores: score_i = s_i + fairness_bonus_i
8. Select winner: i* = argmax_i score_i
9. Compute payment using fairness-adjusted second-price rule
10. Update historical allocation records</code></pre>
<p><strong>Approach 2: Constrained Optimization</strong> <span class="math display">\max_{x,p} \alpha \cdot \text{Revenue} + (1-\alpha) \cdot \text{Quality}</span> <span class="math display">\text{subject to:}</span> <span class="math display">\text{IC, IR, and fairness constraints}</span></p>
<p><strong>Approach 3: Multi-Objective with Fairness</strong> <span class="math display">\max_{x,p} (\text{Revenue}, \text{Quality}, \text{Fairness})</span></p>
<p>Using scalarization: <span class="math display">W = \lambda_1 R + \lambda_2 Q + \lambda_3 F</span></p>
<p>where <span class="math inline">F</span> is a fairness measure such as: <span class="math display">F = -\text{Gini}(\{x_i\}_{i=1}^n) \text{ or } -\sum_i (x_i - \bar{x})^2</span></p>
</section>
<section id="case-study-fair-book-recommendation-system" class="level3" data-number="8.5.4">
<h3 data-number="8.5.4" class="anchored" data-anchor-id="case-study-fair-book-recommendation-system"><span class="header-section-number">8.5.4</span> Case Study: Fair Book Recommendation System</h3>
<p><strong>Scenario:</strong></p>
<ul>
<li>Query: “Recommend mystery novels”</li>
<li>Advertisers:
<ul>
<li>MegaBooks: bid=$10, relevance=0.6, group=large_corp</li>
<li>LocalReads: bid=$4, relevance=0.8, group=small_business</li>
<li>IndiePress: bid=$3, relevance=0.9, group=small_business</li>
</ul></li>
</ul>
<p><strong>Pure Revenue Mechanism:</strong></p>
<ul>
<li>Winner: MegaBooks</li>
<li>Revenue: $10, Quality: 0.6, Small Business Share: 0%</li>
</ul>
<p><strong>Pure Quality Mechanism:</strong></p>
<ul>
<li>Winner: IndiePress</li>
<li>Revenue: $3, Quality: 0.9, Small Business Share: 100%</li>
</ul>
<p><strong>Fair Balanced Mechanism (with small business promotion):</strong></p>
<pre><code>Fairness-Adjusted Scores:
- MegaBooks: 0.5×10 + 0.5×0.6 + 0×0 = 5.3
- LocalReads: 0.5×4 + 0.5×0.8 + 2×1 = 4.4
- IndiePress: 0.5×3 + 0.5×0.9 + 2×1 = 3.95

Winner: MegaBooks (but closer competition)</code></pre>
<p><strong>Dynamic Fair Mechanism (with temporal adjustment):</strong> If small businesses have been under-represented historically:</p>
<pre><code>Historical Deficit Adjustments:
- LocalReads: +3 (significant deficit)
- IndiePress: +2.5 (moderate deficit)

Adjusted Scores:
- MegaBooks: 5.3
- LocalReads: 4.4 + 3 = 7.4
- IndiePress: 3.95 + 2.5 = 6.45

Winner: LocalReads</code></pre>
</section>
<section id="quality-fairness-integration" class="level3" data-number="8.5.5">
<h3 data-number="8.5.5" class="anchored" data-anchor-id="quality-fairness-integration"><span class="header-section-number">8.5.5</span> Quality-Fairness Integration</h3>
<p><strong>Quality Function with Fairness:</strong> <span class="math display">Q_{\text{fair}}(x,r) = \text{Relevance}(x,r) + \text{Diversity}(x) + \text{UserEquity}</span></p>
<p><strong>Components:</strong></p>
<ul>
<li><strong>Relevance</strong>: Standard relevance matching</li>
<li><strong>Diversity</strong>: Bonus for showing diverse advertiser types</li>
<li><strong>User Equity</strong>: Ensures all user types see appropriate recommendations</li>
</ul>
<p><strong>Implementation:</strong></p>
<pre><code>Function: Compute_Fair_Quality(allocation x, relevance r, diversity_bonus δ)
Input: Allocation vector x, Relevance scores r, Diversity parameter δ
Output: Fair quality score

1. base_quality = sum(x[i] × r[i] for i in advertisers)
2. diversity_score = entropy(advertiser_types_in_x)
3. user_equity_score = measure_equal_treatment_across_users()
4. fair_quality = base_quality + δ×diversity_score + user_equity_score
5. Return fair_quality</code></pre>
</section>
<section id="empirical-fairness-evaluation-framework" class="level3" data-number="8.5.6">
<h3 data-number="8.5.6" class="anchored" data-anchor-id="empirical-fairness-evaluation-framework"><span class="header-section-number">8.5.6</span> Empirical Fairness Evaluation Framework</h3>
<p><strong>Metrics for LLM Advertising Fairness:</strong></p>
<p><strong>1. Individual Fairness Metrics:</strong></p>
<ul>
<li><strong>Consistency</strong>: <span class="math inline">\text{Corr}(\text{similarity}(\theta_i, \theta_j), \text{similarity}(x_i, x_j))</span></li>
<li><strong>Lipschitz Constant</strong>: Maximum <span class="math inline">|x_i - x_j|/\|\theta_i - \theta_j\|</span> across similar agents</li>
</ul>
<p><strong>2. Group Fairness Metrics:</strong></p>
<ul>
<li><strong>Demographic Parity</strong>: <span class="math inline">|\mathbb{E}[x \mid G_1] - \mathbb{E}[x \mid G_2]|</span></li>
<li><strong>Equalized Opportunity</strong>: Allocation rates conditional on relevance levels</li>
</ul>
<p><strong>3. Temporal Fairness Metrics:</strong></p>
<ul>
<li><strong>Long-term Proportionality</strong>: Correlation between cumulative allocation and cumulative contribution</li>
<li><strong>Fairness Debt</strong>: Accumulated deviation from fair allocation over time</li>
</ul>
<p><strong>Evaluation Algorithm:</strong></p>
<pre><code>Algorithm: Evaluate Fairness of LLM Advertising Mechanism
Input: Mechanism M, Historical data H, Fairness thresholds T
Output: Fairness assessment report

1. For each fairness concept C in {individual, group, temporal}:
   2.   Compute fairness metrics for concept C
   3.   Compare against threshold T[C]
   4.   Identify violations and their severity
5. Analyze fairness-efficiency trade-offs
6. Generate recommendations for mechanism improvement
7. Return comprehensive fairness report</code></pre>
</section>
<section id="regulatory-and-policy-implications" class="level3" data-number="8.5.7">
<h3 data-number="8.5.7" class="anchored" data-anchor-id="regulatory-and-policy-implications"><span class="header-section-number">8.5.7</span> Regulatory and Policy Implications</h3>
<p><strong>Fairness Requirements in Practice:</strong></p>
<p><strong>1. Transparency Requirements:</strong></p>
<ul>
<li>Advertisers should understand how fairness affects their allocation probabilities</li>
<li>Users should be informed about fairness mechanisms in advertising</li>
</ul>
<p><strong>2. Auditing Frameworks:</strong></p>
<ul>
<li>Regular assessment of fairness across different advertiser groups</li>
<li>Monitoring for unintended discriminatory effects</li>
</ul>
<p><strong>3. Complaint and Redress Mechanisms:</strong></p>
<ul>
<li>Procedures for advertisers to challenge unfair treatment</li>
<li>Mechanisms for correcting systematic biases</li>
</ul>
<p><strong>Implementation Considerations:</strong></p>
<pre><code>Policy Framework: Fair LLM Advertising Regulation
1. Define protected groups (small businesses, minority-owned enterprises)
2. Establish minimum fairness thresholds
3. Require regular fairness audits and public reporting
4. Create appeals process for fairness violations
5. Balance fairness requirements with efficiency and innovation</code></pre>
</section>
</section>
<section id="chapter-synthesis" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="chapter-synthesis"><span class="header-section-number">8.6</span> Chapter Synthesis</h2>
<p>This chapter has developed comprehensive frameworks for understanding and implementing fairness in mechanism design, with particular focus on LLM advertising applications. The key insights and their implications for your thesis research are:</p>
<p><strong>Fundamental Concepts:</strong></p>
<ul>
<li><strong>Multiple Fairness Notions</strong>: Individual fairness, group fairness, temporal fairness, and procedural fairness each capture different aspects of equitable treatment</li>
<li><strong>Trade-off Relationships</strong>: Fairness often conflicts with efficiency and revenue, but the severity depends on the specific fairness concept and market structure</li>
<li><strong>Implementation Challenges</strong>: Fair mechanisms must maintain incentive compatibility while satisfying fairness constraints</li>
</ul>
<p><strong>Theoretical Framework:</strong></p>
<ul>
<li><strong>Mathematical Formalization</strong>: Formal definitions of fairness concepts that can be integrated into mechanism design optimization problems</li>
<li><strong>Impossibility Results</strong>: Fundamental limitations on simultaneously achieving perfect fairness, efficiency, and truthfulness</li>
<li><strong>Computational Approaches</strong>: Algorithms for finding approximately fair mechanisms in complex settings</li>
</ul>
<p><strong>LLM Advertising Applications:</strong></p>
<ul>
<li><strong>Multi-Stakeholder Fairness</strong>: Framework addressing advertiser equity, user welfare, and platform sustainability simultaneously</li>
<li><strong>Dynamic Fairness</strong>: Mechanisms that ensure fair treatment over time, not just in individual auctions</li>
<li><strong>Quality-Fairness Integration</strong>: Methods for balancing relevance with equitable treatment of different advertiser types</li>
</ul>
<p><strong>Research Implications for Your Thesis:</strong></p>
<ol type="1">
<li><p><strong>Three-Objective Framework Enhancement</strong>: You can now formally incorporate fairness as the third objective alongside revenue and quality, with precise mathematical definitions and measurement approaches.</p></li>
<li><p><strong>Empirical Analysis</strong>: The fairness metrics developed here enable you to measure trade-offs between fairness and other objectives in your experimental work.</p></li>
<li><p><strong>Mechanism Design</strong>: The fair mechanism design approaches provide concrete algorithms for implementing different points on the revenue-quality-fairness Pareto frontier.</p></li>
<li><p><strong>Policy Analysis</strong>: Understanding fairness-efficiency trade-offs enables sophisticated welfare analysis of different mechanism choices and their distributional implications.</p></li>
</ol>
<p><strong>Key Research Questions Enabled:</strong></p>
<ul>
<li>How do different fairness concepts affect the achievable revenue-quality trade-offs in LLM advertising?</li>
<li>What fairness-efficiency trade-offs are acceptable from a social welfare perspective?</li>
<li>How can platforms balance fairness to advertisers with fairness to users?</li>
<li>What are the long-term market effects of different fairness policies?</li>
</ul>
<p><strong>Connection to Your Empirical Work:</strong> The fairness measures and evaluation frameworks developed here provide the tools needed to:</p>
<ul>
<li>Design experiments testing different fairness-revenue-quality combinations</li>
<li>Measure fairness outcomes in your LLM advertising experiments</li>
<li>Analyze welfare implications across different stakeholder groups</li>
<li>Evaluate the effectiveness of fair mechanism designs</li>
</ul>
<p><strong>Methodological Contributions:</strong></p>
<ul>
<li>Formal integration of fairness constraints into multi-objective mechanism design</li>
<li>Computational algorithms for fair mechanism optimization</li>
<li>Evaluation frameworks for assessing fairness in complex, multi-stakeholder systems</li>
<li>Dynamic fairness concepts that account for temporal effects</li>
</ul>
<p><strong>Next Steps for Your Research:</strong> With fairness concepts formally integrated into your multi-objective framework, you can now:</p>
<ol type="1">
<li>Design experiments that systematically vary fairness-revenue-quality trade-offs</li>
<li>Measure empirical relationships between these three objectives</li>
<li>Analyze welfare implications for different stakeholder groups</li>
<li>Develop policy recommendations based on fairness-efficiency analysis</li>
</ol>
<p>The fairness framework developed here completes the theoretical foundation for your three-objective analysis, providing the mathematical tools and conceptual clarity needed to conduct rigorous research on multi-objective mechanism design in LLM advertising contexts.</p>
</section>
<section id="exercises" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="exercises"><span class="header-section-number">8.7</span> Exercises</h2>
<p><strong>Exercise 8.1 (Basic Fairness Concepts)</strong> Consider a single-item auction with three bidders: A (valuation $10), B (valuation $8), C (valuation $6).</p>
<ol type="a">
<li>Design an envy-free mechanism. Is it efficient? b) Design a mechanism that maximizes the minimum utility across bidders. What are the resulting allocations and payments? c) Compare the efficiency of your mechanisms from parts (a) and (b) to the efficient allocation.</li>
</ol>
<p><strong>Exercise 8.2 (Individual vs.&nbsp;Group Fairness)</strong> An LLM platform has 6 advertisers: 3 large corporations with bids [$10, $9, $8] and 3 small businesses with bids [$7, $6, $5]. All have identical relevance scores of 0.8.</p>
<ol type="a">
<li>What allocation satisfies individual fairness (similar bidders treated similarly)? b) Design an allocation satisfying group fairness (equal expected allocation rates between groups). c) Can both individual and group fairness be satisfied simultaneously? Explain why or why not.</li>
</ol>
<p><strong>Exercise 8.3 (Proportional Fairness in LLM Advertising)</strong> Three advertisers compete for LLM ad placement:</p>
<ul>
<li>BookStore: bid = $4, relevance = 0.9</li>
<li>TechShop: bid = $6, relevance = 0.6</li>
<li>CoffeePlace: bid = $3, relevance = 0.7</li>
</ul>
<ol type="a">
<li>Find the proportionally fair allocation that maximizes ∏ᵢ xᵢ subject to ∑ᵢ xᵢ ≤ 1. b) Compare this to the allocation that maximizes total relevance-weighted value ∑ᵢ (bid × relevance)ᵢ × xᵢ. c) Calculate the “price of fairness” - the efficiency loss from using proportional fairness.</li>
</ol>
<p><strong>Exercise 8.4 (Dynamic Fairness)</strong> Over 4 time periods, a small business (SmallCorp) and large corporation (BigCorp) compete for ad slots:</p>
<p>Period 1: SmallCorp bid=$3, BigCorp bid=$7 Period 2: SmallCorp bid=$4, BigCorp bid=$6<br>
Period 3: SmallCorp bid=$2, BigCorp bid=$8 Period 4: SmallCorp bid=$5, BigCorp bid=$5</p>
<ol type="a">
<li>What allocation results from pure revenue maximization each period? b) Design a dynamic mechanism ensuring each advertiser wins exactly 2 periods. c) Calculate total revenue under both approaches. What is the cost of temporal fairness?</li>
</ol>
<p><strong>Exercise 8.5 (Multi-Objective Fair Mechanism Design)</strong> Design a mechanism optimizing: W = λ₁×Revenue + λ₂×Quality + λ₃×Fairness</p>
<p>For advertisers with (bid, relevance): A($8, 0.4), B($5, 0.8), C($6, 0.6)</p>
<ol type="a">
<li>Express Revenue, Quality, and Fairness mathematically in terms of allocation probabilities. b) Find optimal allocation for weights (0.5, 0.3, 0.2). c) Find optimal allocation for weights (0.2, 0.3, 0.5). d) Describe how the solution changes as fairness weight increases.</li>
</ol>
<p><strong>Exercise 8.6 (Fairness Under Uncertainty)</strong> Advertiser valuations are uncertain: v₁ ~ U[2,6], v₂ ~ U[4,8].</p>
<ol type="a">
<li>Design a mechanism that is ex-ante fair (equal expected allocation probabilities). b) Is your mechanism from (a) ex-post fair for all valuation realizations? c) Design an alternative mechanism that achieves ex-post fairness. What efficiency do you sacrifice?</li>
</ol>
<p><strong>Exercise 8.7 (Computational Fair Mechanism)</strong> Implement the fair allocation algorithm:</p>
<pre><code>Input: n advertisers with bids bᵢ, relevance rᵢ, fairness weights wᵢ
Output: Fair allocation maximizing ∑ wᵢ log(xᵢ)

Initialize: xᵢ = 1/n for all i
While not converged:
    For each i: compute gradient gᵢ = wᵢ/xᵢ
    Update: xᵢ ← xᵢ + α(gᵢ - ḡ) where ḡ = (1/n)∑gⱼ
    Project onto constraints: ∑xᵢ ≤ 1, xᵢ ≥ 0</code></pre>
<ol type="a">
<li>Prove this algorithm converges to the proportionally fair allocation. b) Implement the algorithm and test on a 3-advertiser example. c) How does convergence speed depend on the step size α?</li>
</ol>
<p><strong>Exercise 8.8 (Fairness-Efficiency Trade-offs in LLM Context)</strong> An LLM platform serves two user types (budget-conscious, premium) and has two advertiser types (discount, luxury).</p>
<ol type="a">
<li>Define what “user fairness” means in this context. b) Design a mechanism ensuring both user groups see relevant advertisements. c) Analyze the efficiency cost of your fairness constraints. d) Under what conditions might fairness actually improve efficiency?</li>
</ol>
<p><strong>Exercise 8.9 (Group Fairness with Intersectionality)</strong> Advertisers belong to multiple groups: {Large/Small} × {Tech/Retail} × {New/Established}.</p>
<ol type="a">
<li>How many distinct groups exist? b) Design fairness constraints ensuring no group is systematically disadvantaged. c) Show that these constraints may conflict with each other. d) Propose a method for resolving conflicting group fairness requirements.</li>
</ol>
<p><strong>Exercise 8.10 (Advanced Application: Fair LLM Recommendation Systems)</strong> Design a complete fair mechanism for LLM book recommendations:</p>
<ol type="a">
<li>Define three stakeholder groups and their fairness concerns. b) Formulate the multi-objective optimization problem with fairness constraints. c) Propose a practical algorithm balancing all objectives. d) Design an evaluation framework measuring fairness across different time horizons. e) Discuss regulatory implications of your mechanism design choices.</li>
</ol>
</section>
<section id="further-reading" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="further-reading"><span class="header-section-number">8.8</span> Further Reading</h2>
<p><strong>Foundational Fair Division Theory:</strong></p>
<ul>
<li>Moulin, H. (2003). <em>Fair Division and Collective Welfare</em>. MIT Press.</li>
<li>Thomson, W. (2011). <em>Introduction to the Theory of Fair Allocation</em>. Princeton University Press.</li>
<li>Brams, S. J., &amp; Taylor, A. D. (1996). <em>Fair Division: From Cake-Cutting to Dispute Resolution</em>. Cambridge University Press.</li>
</ul>
<p><strong>Fairness in Mechanism Design:</strong></p>
<ul>
<li>Procaccia, A. D. (2013). Cake cutting: not just child’s play. <em>Communications of the ACM</em>, 56(7), 78-87.</li>
<li>Budish, E. (2011). The combinatorial assignment problem: Approximate competitive equilibrium from equal incomes. <em>Journal of Political Economy</em>, 119(6), 1061-1103.</li>
<li>Bogomolnaia, A., &amp; Moulin, H. (2001). A new solution to the random assignment problem. <em>Journal of Economic Theory</em>, 100(2), 295-328.</li>
</ul>
<p><strong>Algorithmic Fairness:</strong></p>
<ul>
<li>Dwork, C., Hardt, M., Pitassi, T., Reingold, O., &amp; Zemel, R. (2012). Fairness through awareness. In <em>Proceedings of the 3rd innovations in theoretical computer science conference</em> (pp.&nbsp;214-226).</li>
<li>Hardt, M., Price, E., &amp; Srebro, N. (2016). Equality of opportunity in supervised learning. <em>Advances in Neural Information Processing Systems</em>, 29.</li>
<li>Kleinberg, J., Mullainathan, S., &amp; Raghavan, M. (2016). Inherent trade-offs in the fair determination of risk scores. <em>arXiv preprint arXiv:1609.05807</em>.</li>
</ul>
<p><strong>Economics of Fairness:</strong></p>
<ul>
<li>Fehr, E., &amp; Schmidt, K. M. (1999). A theory of fairness, competition, and cooperation. <em>The Quarterly Journal of Economics</em>, 114(3), 817-868.</li>
<li>Bolton, G. E., &amp; Ockenfels, A. (2000). ERC: A theory of equity, reciprocity, and competition. <em>American Economic Review</em>, 90(1), 166-193.</li>
<li>Rawls, J. (1971). <em>A Theory of Justice</em>. Harvard University Press.</li>
</ul>
<p><strong>Fairness in Auctions and Markets:</strong></p>
<ul>
<li>Ashlagi, I., &amp; Roth, A. E. (2014). Free riding and participation in large scale, multi‐hospital kidney exchange. <em>Theoretical Economics</em>, 9(3), 817-863.</li>
<li>Akbarpour, M., Li, S., &amp; Oveis Gharan, S. (2020). Thickness and information in dynamic matching markets. <em>Journal of Political Economy</em>, 128(3), 783-815.</li>
<li>Abdulkadiroğlu, A., &amp; Sönmez, T. (2003). School choice: A mechanism design approach. <em>American Economic Review</em>, 93(3), 729-747.</li>
</ul>
<p><strong>Computational Fair Division:</strong></p>
<ul>
<li>Lipton, R. J., Markakis, E., Mossel, E., &amp; Saberi, A. (2004). On approximately fair allocations of divisible goods. In <em>Proceedings of the 5th ACM conference on Electronic commerce</em> (pp.&nbsp;125-131).</li>
<li>Chen, Y., Lai, J. K., Parkes, D. C., &amp; Procaccia, A. D. (2013). Truth, justice, and cake cutting. <em>Games and Economic Behavior</em>, 77(1), 284-297.</li>
<li>Aziz, H., &amp; Mackenzie, S. (2016). A discrete and bounded envy-free cake cutting protocol for any number of agents. In <em>2016 IEEE 57th Annual Symposium on Foundations of Computer Science</em> (pp.&nbsp;416-427).</li>
</ul>
<p><strong>Multi-Objective Optimization with Fairness:</strong></p>
<ul>
<li>Bertsimas, D., Farias, V. F., &amp; Trichakis, N. (2011). The price of fairness. <em>Operations Research</em>, 59(1), 17-31.</li>
<li>Hooker, J. N. (2010). Optimal job assignment with fair workload. <em>Constraints</em>, 15(1), 1-16.</li>
<li>Nicosia, G., Pardalos, P., Giuffrida, G., &amp; Umeton, R. (Eds.). (2019). <em>Machine Learning, Optimization, and Data Science</em>. Springer.</li>
</ul>
<p><strong>Fairness in Online Algorithms:</strong></p>
<ul>
<li>Biswas, A., &amp; Barman, S. (2018). Fair division under cardinality constraints. In <em>Proceedings of the 27th International Joint Conference on Artificial Intelligence</em> (pp.&nbsp;91-97).</li>
<li>Kash, I., Procaccia, A. D., &amp; Shah, N. (2013). No agent left behind: dynamic fair division of multiple resources. <em>Journal of Artificial Intelligence Research</em>, 51, 579-603.</li>
<li>Im, S., Kell, N., Kulkarni, J., &amp; Panigrahi, D. (2019). Tight bounds for online vector bin packing. In <em>Proceedings of the 51st Annual ACM SIGACT Symposium on Theory of Computing</em> (pp.&nbsp;961-972).</li>
</ul>
<p><strong>Platform Economics and Fairness:</strong></p>
<ul>
<li>Cabral, L., &amp; Halaburda, H. (2019). Platform dynamics and the third-party developer problem. <em>Journal of Economics &amp; Management Strategy</em>, 28(2), 374-383.</li>
<li>Hagiu, A., &amp; Wright, J. (2020). When data creates competitive advantage. <em>Harvard Business Review</em>, 98(1), 94-101.</li>
<li>Parker, G., Van Alstyne, M., &amp; Jiang, X. (2017). Platform ecosystems: How developers invert the firm. <em>MIS Quarterly</em>, 41(1), 255-266.</li>
</ul>
<p><strong>AI Ethics and Fairness:</strong></p>
<ul>
<li>Barocas, S., Hardt, M., &amp; Narayanan, A. (2019). <em>Fairness and Machine Learning</em>. fairmlbook.org.</li>
<li>O’Neil, C. (2016). <em>Weapons of Math Destruction: How Big Data Increases Inequality and Threatens Democracy</em>. Crown Books.</li>
<li>Selbst, A. D., Boyd, D., Friedler, S. A., Venkatasubramanian, S., &amp; Vertesi, J. (2019). Fairness and abstraction in sociotechnical systems. In <em>Proceedings of the conference on fairness, accountability, and transparency</em> (pp.&nbsp;59-68).</li>
</ul>
<p><strong>Legal and Regulatory Perspectives:</strong></p>
<ul>
<li>Bambauer, J., &amp; Zarsky, T. (2018). The algorithm game. <em>Notre Dame Law Review</em>, 94, 1-47.</li>
<li>Citron, D. K., &amp; Pasquale, F. (2014). The scored society: Due process for automated predictions. <em>Washington Law Review</em>, 89, 1-33.</li>
<li>Wachter, S., Mittelstadt, B., &amp; Russell, C. (2017). Counterfactual explanations without opening the black box: Automated decisions and the GDPR. <em>Harvard Journal of Law &amp; Technology</em>, 31, 841.</li>
</ul>
<p><strong>Empirical Studies of Fairness:</strong></p>
<ul>
<li>Lambrecht, A., &amp; Tucker, C. (2019). Algorithmic bias? An empirical study of apparent gender-based discrimination in the display of STEM career ads. <em>Management Science</em>, 65(7), 2966-2981.</li>
<li>Datta, A., Tschantz, M. C., &amp; Datta, A. (2015). Automated experiments on ad privacy settings: A tale of opacity, choice, and discrimination. <em>Proceedings on Privacy Enhancing Technologies</em>, 2015(1), 92-112.</li>
<li>Ali, M., Sapiezynski, P., Bogen, M., Korolova, A., Mislove, A., &amp; Rieke, A. (2019). Discrimination through optimization: How Facebook’s ad delivery can lead to biased outcomes. <em>Proceedings of the ACM on Human-Computer Interaction</em>, 3(CSCW), 1-30.</li>
</ul>
<p><strong>Special Issues and Conferences:</strong></p>
<ul>
<li>ACM Conference on Fairness, Accountability, and Transparency (FAccT)</li>
<li>AAAI/ACM Conference on AI, Ethics, and Society (AIES)</li>
<li>International Conference on Machine Learning (ICML) - Fairness Track</li>
<li>Conference on Neural Information Processing Systems (NeurIPS) - Fairness Sessions</li>
<li>ACM Conference on Economics and Computation (EC) - Fair Division Sessions</li>
</ul>
<p><strong>Recent Surveys and Tutorials:</strong></p>
<ul>
<li>Mehrabi, N., Morstatter, F., Saxena, N., Lerman, K., &amp; Galstyan, A. (2021). A survey on bias and fairness in machine learning. <em>ACM Computing Surveys</em>, 54(6), 1-35.</li>
<li>Verma, S., &amp; Rubin, J. (2018). Fairness definitions explained. In <em>2018 ieee/acm international workshop on software fairness</em> (pp.&nbsp;1-7).</li>
<li>Narayanan, A. (2018). Translation tutorial: 21 fairness definitions and their politics. In <em>Proceedings of the 2018 conference on fairness, accountability, and transparency</em> (pp.&nbsp;1194-1194).</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../part02/multi-objective-md.html" class="pagination-link" aria-label="Multi-Objective Mechanism Design">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Multi-Objective Mechanism Design</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part03/computational-aspects-md.html" class="pagination-link" aria-label="Computational Aspects of Mechanism Design">
        <span class="nav-page-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Computational Aspects of Mechanism Design</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>